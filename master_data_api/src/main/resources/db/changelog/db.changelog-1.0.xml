<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <property name="WML" value="/db/data/stage_data_initialization/EA-WML.csv"/>
    <property name="IPPC" value="/db/data/stage_data_initialization/IPPC.csv"/>
    <property name="PRE" value="/db/data/stage_data_initialization/Pre-EA.csv"/>
    <property name="EPR" value="/db/data/stage_data_initialization/EPR.csv"/>

    <!--
    ****************************************************************
    Sites
    ****************************************************************
    -->
    <changeSet id="create-table: site" author="DEFRA">
        <createSequence sequenceName="md_site_id_seq" startValue="1"/>

        <createTable tableName="md_site">
            <column name="id" type="bigint" defaultValueSequenceNext="md_site_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(150)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <rollback>
            <dropTable tableName="md_site"/>
            <dropSequence sequenceName="md_site_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: site" author="DEFRA">
        <createIndex indexName="idx_md_site_code" tableName="md_site" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="site" indexName="idx_md_site_code"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Return Types
    ****************************************************************
    -->
    <changeSet id="create-table: md_return_type" author="DEFRA">
        <createSequence sequenceName="md_return_type_id_seq" startValue="1"/>
        <createTable tableName="md_return_type">
            <column name="id" type="bigint" defaultValueSequenceNext="md_return_type_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(80)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_return_type"/>
            <dropSequence sequenceName="md_return_type_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: return_type" author="DEFRA">
        <createIndex indexName="idx_md_return_type_code" tableName="md_return_type" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_return_type" indexName="idx_md_return_type_code"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Parameters
    ****************************************************************
    -->
    <changeSet id="create-table: md_parameter_type" author="DEFRA">
        <createSequence sequenceName="md_parameter_type_id_seq" startValue="1"/>
        <createTable tableName="md_parameter_type">
            <column name="id" type="bigint" defaultValueSequenceNext="md_parameter_type_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(100)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_parameter_type"/>
            <dropSequence sequenceName="md_parameter_type_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: parameter" author="DEFRA">
        <createSequence sequenceName="md_parameter_id_seq" startValue="1"/>
        <createTable tableName="md_parameter">
            <column name="id" type="bigint" defaultValueSequenceNext="md_parameter_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(150)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="type_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_parameter__type"
                             references="md_parameter_type(id)"/>
            </column>
            <column name="cas" type="varchar(50)"/>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_parameter"/>
            <dropSequence sequenceName="md_parameter_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: parameter" author="DEFRA">
        <createIndex indexName="idx_md_parameter_code" tableName="md_parameter" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_parameter" indexName="idx_md_parameter_code"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: md_parameter_group" author="DEFRA">
        <createSequence sequenceName="md_parameter_group_id_seq" startValue="1"/>
        <createTable tableName="md_parameter_group">
            <column name="id" type="bigint" defaultValueSequenceNext="md_parameter_group_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_parameter_group"/>
            <dropSequence sequenceName="md_parameter_group_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: md_parameter_group_entries" author="DEFRA">
        <createTable tableName="md_parameter_group_entries">
            <column name="md_parameter_group_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_parameter_group_entries__group"
                             references="md_parameter_group(id)"/>
            </column>
            <column name="parameters_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_parameter_group_entries__parameter"
                             references="md_parameter(id)"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="md_parameter_group_id, parameters_id" tableName="md_parameter_group_entries"/>
        <rollback>
            <dropTable tableName="md_parameter_group_entries"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Parameter Aliases
    ****************************************************************
    -->
    <changeSet id="create-table: parameter_alias" author="DEFRA">
        <createSequence sequenceName="md_parameter_alias_id_seq" startValue="1"/>
        <createTable tableName="md_parameter_alias">
            <column name="id" type="bigint" defaultValueSequenceNext="md_parameter_alias_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(150)">
                <constraints nullable="false" unique="true"/>
            </column>

            <column name="preferred" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_parameter_alias__preferred"
                             references="md_parameter(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_parameter_alias"/>
            <dropSequence sequenceName="md_parameter_alias_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: parameter_alias" author="DEFRA">
        <createIndex indexName="idx_md_parameter_alias" tableName="md_parameter_alias" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_parameter_alias" indexName="idx_md_parameter_alias"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Units
    ****************************************************************
    -->
    <changeSet id="create-table: md_unit_type" author="DEFRA">
        <createSequence sequenceName="md_unit_type_id_seq" startValue="1"/>
        <createTable tableName="md_unit_type">
            <column name="id" type="bigint" defaultValueSequenceNext="md_unit_type_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(150)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_unit_type"/>
            <dropSequence sequenceName="md_unit_type_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: unit" author="DEFRA">
        <createSequence sequenceName="md_unit_id_seq" startValue="1"/>
        <createTable tableName="md_unit">
            <column name="id" type="bigint" defaultValueSequenceNext="md_unit_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(10)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="long_name" type="varchar(50)"/>
            <column name="unicode" type="varchar(50)"/>
            <column name="description" type="varchar(200)"/>
            <column name="conversion" type="numeric(30, 15)"/>
            <column name="type_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_unit__type"
                             references="md_unit_type(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_unit"/>
            <dropSequence sequenceName="md_unit_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: unit" author="DEFRA">
        <createIndex indexName="idx_md_unit_code" tableName="md_unit" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_unit" indexName="idx_md_unit_code"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Unit Aliases
    ****************************************************************
    -->
    <changeSet id="create-table: unit_alias" author="DEFRA">
        <createSequence sequenceName="md_unit_alias_id_seq" startValue="1"/>
        <createTable tableName="md_unit_alias">
            <column name="id" type="bigint" defaultValueSequenceNext="md_unit_alias_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(12)">
                <constraints nullable="false" unique="true"/>
            </column>

            <column name="preferred" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_unit__preferred"
                             references="md_unit(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_unit_alias"/>
            <dropSequence sequenceName="md_unit_alias_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: unit_alias" author="DEFRA">
        <createIndex indexName="idx_md_unit_alias" tableName="md_unit_alias" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_unit_alias" indexName="idx_md_unit_alias"/>
        </rollback>
    </changeSet>


    <!--
    ****************************************************************
    Method Or Standard
    ****************************************************************
    -->
    <changeSet id="create-table: method_or_standard" author="DEFRA">
        <createSequence sequenceName="md_method_or_standard_id_seq" startValue="1"/>

        <createTable tableName="md_method_or_standard">
            <column name="id" type="bigint" defaultValueSequenceNext="md_method_or_standard_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(30)">
                <constraints nullable="false" unique="true"/>
            </column>

            <column name="notes" type="varchar(250)"/>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_method_or_standard"/>
            <dropSequence sequenceName="md_method_or_standard_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: method_or_standard" author="DEFRA">
        <createIndex indexName="idx_md_method_or_standard_code" tableName="md_method_or_standard" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_method_or_standard" indexName="idx_md_method_or_standard_code"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Qualifiers
    ****************************************************************
    -->
    <changeSet id="create-table: qualifier" author="DEFRA">
        <createSequence sequenceName="md_qualifier_id_seq" startValue="1"/>
        <createTable tableName="md_qualifier">
            <column name="id" type="bigint" defaultValueSequenceNext="md_qualifier_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(100)">
                <constraints nullable="false" unique="true"/>
            </column>

            <column name="notes" type="varchar(100)"/>
            <column name="type" type="varchar(50)"/>
            <column name="singleormultiple" type="varchar(20)"/>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_qualifier"/>
            <dropSequence sequenceName="md_qualifier_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: qualifier" author="DEFRA">
        <createIndex indexName="idx_md_qualifier_code" tableName="md_qualifier" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_qualifier" indexName="idx_md_qualifier_code"/>
        </rollback>
    </changeSet>
    <!--
    ****************************************************************
    Reference Periods
    ****************************************************************
    -->
    <changeSet id="create-table: md_reference_period" author="DEFRA">
        <createSequence sequenceName="md_reference_period_id_seq" startValue="1"/>
        <createTable tableName="md_reference_period">
            <column name="id" type="bigint" defaultValueSequenceNext="md_reference_period_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(100)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="notes" type="varchar(250)"/>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_reference_period"/>
            <dropSequence sequenceName="md_reference_period_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: md_reference_period" author="DEFRA">
        <createIndex indexName="idx_md_reference_period_code" tableName="md_reference_period" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_reference_period" indexName="idx_md_reference_period_code"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Reference Period Aliases
    ****************************************************************
    -->
    <changeSet id="create-table: reference_period_alias" author="DEFRA">
        <createSequence sequenceName="md_reference_period_alias_id_seq" startValue="1"/>
        <createTable tableName="md_reference_period_alias">
            <column name="id" type="bigint" defaultValueSequenceNext="md_reference_period_alias_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(100)">
                <constraints nullable="false" unique="true"/>
            </column>

            <column name="preferred" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_reference_period__preferred"
                             references="md_reference_period(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_reference_period_alias"/>
            <dropSequence sequenceName="md_reference_period_alias_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: reference_period_alias" author="DEFRA">
        <createIndex indexName="idx_md_reference_period_alias" tableName="md_reference_period_alias" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_reference_period_alias" indexName="idx_md_reference_period_alias"/>
        </rollback>
    </changeSet>


    <!--
    ****************************************************************
    Return Periods
    ****************************************************************
    -->
    <changeSet id="create-table: md_return_period" author="DEFRA">
        <createSequence sequenceName="md_return_period_id_seq" startValue="1"/>
        <createTable tableName="md_return_period">
            <column name="id" type="bigint" defaultValueSequenceNext="md_return_period_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(20)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="definition" type="varchar(600)"/>
            <column name="example" type="varchar(20)"/>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_return_period"/>
            <dropSequence sequenceName="md_return_period_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: md_return_period" author="DEFRA">
        <createIndex indexName="idx_md_return_period_code" tableName="md_return_period" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_return_period" indexName="idx_md_return_period_code"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Text Values
    ****************************************************************
    -->
    <changeSet id="create-table: text_value" author="DEFRA">
        <createSequence sequenceName="md_text_value_id_seq" startValue="1"/>
        <createTable tableName="md_text_value">
            <column name="id" type="bigint" defaultValueSequenceNext="md_text_value_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(30)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_text_value"/>
            <dropSequence sequenceName="md_text_value_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: text_value" author="DEFRA">
        <createIndex indexName="idx_md_text_value_code" tableName="md_text_value" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_text_value" indexName="idx_md_text_value_code"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Text Value Aliases
    ****************************************************************
    -->
    <changeSet id="create-table: text_value_alias" author="DEFRA">
        <createSequence sequenceName="md_text_value_alias_id_seq" startValue="1"/>
        <createTable tableName="md_text_value_alias">
            <column name="id" type="bigint" defaultValueSequenceNext="md_text_value_alias_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(30)">
                <constraints nullable="false" unique="true"/>
            </column>

            <column name="preferred" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_text_value__preferred"
                             references="md_text_value(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_text_value_alias"/>
            <dropSequence sequenceName="md_text_value_alias_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: text_value_alias" author="DEFRA">
        <createIndex indexName="idx_md_text_value_alias" tableName="md_text_value_alias" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_text_value_alias" indexName="idx_md_text_value_alias"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    EPRTR EPRTRSector.
    ****************************************************************
    -->
    <changeSet id="create-table: md_eprtr_sector" author="DEFRA">
        <createSequence sequenceName="md_eprtr_sector_id_seq" startValue="1"/>
        <createTable tableName="md_eprtr_sector">
            <column name="id" type="bigint" defaultValueSequenceNext="md_eprtr_sector_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(8)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="description" type="varchar(80)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_eprtr_sector"/>
            <dropSequence sequenceName="md_eprtr_sector_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: idx_md_eprtr_sector" author="DEFRA">
        <createIndex indexName="idx_md_eprtr_sector" tableName="md_eprtr_sector" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_eprtr_sector" indexName="idx_md_eprtr_sector"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    EPRTR Activity
    ****************************************************************
    -->
    <changeSet id="create-table: md_eprtr_activity" author="DEFRA">
        <createSequence sequenceName="md_eprtr_activity_id_seq" startValue="1"/>
        <createTable tableName="md_eprtr_activity">
            <column name="id" type="bigint" defaultValueSequenceNext="md_eprtr_activity_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(8)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="description" type="varchar(500)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="threshold" type="varchar(500)">
                <constraints nullable="true" unique="false"/>
            </column>
            <column name="eprtr_sector_id" type="bigint">
                <constraints
                        nullable="false"
                        foreignKeyName="fk_md_eprtr_sector"
                        references="md_eprtr_sector(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_eprtr_activity"/>
            <dropSequence sequenceName="md_eprtr_activity_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: idx_md_eprtr_activity" author="DEFRA">
        <createIndex indexName="idx_md_eprtr_activity" tableName="md_eprtr_activity" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_eprtr_activity" indexName="idx_md_eprtr_activity"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Nose_activity_class
    ****************************************************************
    -->
    <changeSet id="create-table: md_nose_activity_class" author="DEFRA">
        <createSequence sequenceName="md_nose_activity_class_id_seq" startValue="1"/>
        <createTable tableName="md_nose_activity_class">
            <column name="id" type="bigint" defaultValueSequenceNext="md_nose_activity_class_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(50)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_nose_activity_class"/>
            <dropSequence sequenceName="md_nose_activity_class_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: idx_md_nose_activity_class" author="DEFRA">
        <createIndex indexName="idx_md_nose_activity_class" tableName="md_nose_activity_class" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_nose_activity_class" indexName="idx_md_nose_activity_class"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Nose_activity
    ****************************************************************
    -->
    <changeSet id="create-table: md_nose_activity" author="DEFRA">
        <createSequence sequenceName="md_nose_activity_id_seq" startValue="1"/>
        <createTable tableName="md_nose_activity">
            <column name="id" type="bigint" defaultValueSequenceNext="md_nose_activity_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="nose_activity_class_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_md_nose_activity_class"
                             references="md_nose_activity_class(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_nose_activity"/>
            <dropSequence sequenceName="md_nose_activity_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: idx_md_nose_activity" author="DEFRA">
        <createIndex indexName="idx_md_nose_activity" tableName="md_nose_activity" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_nose_activity" indexName="idx_md_nose_activity"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Nose_activity_process
    ****************************************************************
    -->
    <changeSet id="create-table: md_nose_process" author="DEFRA">
        <createSequence sequenceName="md_nose_process_id_seq" startValue="1"/>
        <createTable tableName="md_nose_process">
            <column name="id" type="bigint" defaultValueSequenceNext="md_nose_process_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(10)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="description" type="varchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_nose_process"/>
            <dropSequence sequenceName="md_nose_process_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: idx_md_nose_process" author="DEFRA">
        <createIndex indexName="idx_md_nose_process" tableName="md_nose_process" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_nose_process" indexName="idx_md_nose_process"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Many-to-Many Nose_activity_process
    ****************************************************************
    -->
    <changeSet id="create-table: md_nose_activity_process" author="DEFRA">

        <createTable tableName="md_nose_activity_process">
            <column name="nose_activity_id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>

            <column name="nose_process_id" type="bigint">
                <constraints primaryKey="true" nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="nose_activity_id"
                                 baseTableName="md_nose_activity_process"
                                 constraintName="fk_nose_activity"
                                 onDelete="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="md_nose_activity"/>

        <addForeignKeyConstraint baseColumnNames="nose_process_id"
                                 baseTableName="md_nose_activity_process"
                                 constraintName="fk_nose_process"
                                 onDelete="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="md_nose_process"/>

        <createIndex indexName="md_nose_activity_idx" tableName="md_nose_activity_process" unique="true">
            <column name="nose_process_id"/>
            <column name="nose_activity_id"/>
        </createIndex>

        <rollback>
            <dropTable tableName="md_nose_activity_process"/>
        </rollback>

    </changeSet>

    <!--
    ****************************************************************
    NACE Codes
    ****************************************************************
    -->
    <changeSet id="create-table: md_nace_section" author="DEFRA">
        <createSequence sequenceName="md_nace_section_id_seq" startValue="1"/>
        <createTable tableName="md_nace_section">
            <column name="id" type="bigint" defaultValueSequenceNext="md_nace_section_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(8)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="description" type="varchar(255)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="details" type="varchar(8000)">
                <constraints nullable="true" unique="false"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_nace_section"/>
            <dropSequence sequenceName="md_nace_section_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: md_nace_section" author="DEFRA">
        <createIndex indexName="idx_md_nace_section_code" tableName="md_nace_section" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_nace_section" indexName="idx_md_nace_section"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: md_nace_division" author="DEFRA">
        <createSequence sequenceName="md_nace_division_id_seq" startValue="1"/>
        <createTable tableName="md_nace_division">
            <column name="id" type="bigint" defaultValueSequenceNext="md_nace_division_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(8)">
                <constraints nullable="false" unique="true"/>
            </column>

            <column name="description" type="varchar(255)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="details" type="varchar(8000)">
                <constraints nullable="true" unique="false"/>
            </column>
            <column name="nace_section_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_nace_division__section"
                             references="md_nace_section(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_nace_division"/>
            <dropSequence sequenceName="md_nace_division_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: md_nace_division" author="DEFRA">
        <createIndex indexName="idx_md_nace_division_code" tableName="md_nace_division" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_nace_division" indexName="idx_md_nace_division"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: md_nace_group" author="DEFRA">
        <createSequence sequenceName="md_nace_group_id_seq" startValue="1"/>
        <createTable tableName="md_nace_group">
            <column name="id" type="bigint" defaultValueSequenceNext="md_nace_group_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(8)">
                <constraints nullable="false" unique="true"/>
            </column>

            <column name="description" type="varchar(255)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="details" type="varchar(8000)">
                <constraints nullable="true" unique="false"/>
            </column>
            <column name="nace_division_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_nace_group__division"
                             references="md_nace_division(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_nace_group"/>
            <dropSequence sequenceName="md_nace_group_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: md_nace_group" author="DEFRA">
        <createIndex indexName="idx_md_nace_group_code" tableName="md_nace_group" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_nace_group" indexName="idx_md_nace_group"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: md_nace_class" author="DEFRA">
        <createSequence sequenceName="md_nace_class_id_seq" startValue="1"/>
        <createTable tableName="md_nace_class">
            <column name="id" type="bigint" defaultValueSequenceNext="md_nace_class_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(8)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="description" type="varchar(255)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="details" type="varchar(8000)">
                <constraints nullable="true" unique="false"/>
            </column>
            <column name="nace_group_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_nace_class__nace_group"
                             references="md_nace_group(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_nace_class"/>
            <dropSequence sequenceName="md_nace_class_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: md_nace_class" author="DEFRA">
        <createIndex indexName="idx_md_nace_class_code" tableName="md_nace_class" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_nace_class" indexName="idx_md_nace_class"/>
        </rollback>
    </changeSet>

    <!--
     ****************************************************************
     EWC Codes
     ****************************************************************
    -->
    <changeSet id="create-table: md_ewc_chapter" author="DEFRA">
        <createSequence sequenceName="md_ewc_chapter_id_seq" startValue="1"/>
        <createTable tableName="md_ewc_chapter">
            <column name="id" type="bigint" defaultValueSequenceNext="md_ewc_chapter_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(2)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="code" type="varchar(2)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="description" type="varchar(500)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_ewc_chapter"/>
            <dropSequence sequenceName="md_ewc_chapter_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: md_ewc_chapter" author="DEFRA">
        <createIndex indexName="idx_md_ewc_chapter_code" tableName="md_ewc_chapter" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_ewc_chapter" indexName="idx_md_ewc_chapter"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: md_ewc_subchapter" author="DEFRA">
        <createSequence sequenceName="md_ewc_subchapter_id_seq" startValue="1"/>
        <createTable tableName="md_ewc_subchapter">
            <column name="id" type="bigint" defaultValueSequenceNext="md_ewc_subchapter_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(5)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="code" type="varchar(2)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="description" type="varchar(500)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="ewc_chapter_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_ewc_subchapter__chapter"
                             references="md_ewc_chapter(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_ewc_subchapter"/>
            <dropSequence sequenceName="md_ewc_subchapter_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: md_ewc_subchapter" author="DEFRA">
        <createIndex indexName="idx_md_ewc_subchapter_code" tableName="md_ewc_subchapter" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_ewc_subchapter" indexName="idx_md_ewc_subchapter"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: md_ewc_activity" author="DEFRA">
        <createSequence sequenceName="md_ewc_activity_id_seq" startValue="1"/>
        <createTable tableName="md_ewc_activity">
            <column name="id" type="bigint" defaultValueSequenceNext="md_ewc_activity_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(8)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="code" type="varchar(2)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="hazardous" type="boolean">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="varchar(500)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="ewc_subchapter_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_ewc_activity__subchapter"
                             references="md_ewc_subchapter(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_ewc_activity"/>
            <dropSequence sequenceName="md_ewc_activity_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: md_ewc_activity" author="DEFRA">
        <createIndex indexName="idx_md_ewc_activity_code" tableName="md_ewc_activity" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_ewc_activity" indexName="idx_md_ewc_activity"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Routes and subroutes
    ****************************************************************
    -->
    <changeSet id="create-table: md_route" author="DEFRA">
        <createSequence sequenceName="md_route_id_seq" startValue="1"/>
        <createTable tableName="md_route">
            <column name="id" type="bigint" defaultValueSequenceNext="md_route_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(50)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_route"/>
            <dropSequence sequenceName="md_route_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-table: md_subroute" author="DEFRA">
        <createSequence sequenceName="md_subroute_id_seq" startValue="1"/>
        <createTable tableName="md_subroute">
            <column name="id" type="bigint" defaultValueSequenceNext="md_subroute_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(50)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="route_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_subroute__route"
                             references="md_route(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_subroute"/>
            <dropSequence sequenceName="md_subroute_id_seq"/>
        </rollback>
    </changeSet>


    <!--
    ****************************************************************
    Regimes
    ****************************************************************
    -->
    <changeSet id="create-table: md_regime" author="DEFRA">
        <createSequence sequenceName="md_regime_id_seq" startValue="1"/>
        <createTable tableName="md_regime">
            <column name="id" type="bigint" defaultValueSequenceNext="md_regime_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="context" type="varchar(100)">
                <constraints nullable="false"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_regime"/>
            <dropSequence sequenceName="md_regime_id_seq"/>
        </rollback>
    </changeSet>


    <!--
    ****************************************************************
    Regime Obligations
    ****************************************************************
    -->
    <changeSet id="create-table: md_regime_obligation" author="DEFRA">
        <createSequence sequenceName="md_regime_obligation_id_seq"/>
        <createTable tableName="md_regime_obligation">
            <column name="id" type="bigint" defaultValueSequenceNext="md_regime_obligation_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="description" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="regime_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_regime_obligation__regime"
                             references="md_regime(id)"/>
            </column>
            <column name="route_id" type="bigint">
                <constraints nullable="true"
                             foreignKeyName="fk_regime_obligation__route"
                             references="md_route(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_regime_obligation"/>
            <dropSequence sequenceName="md_regime_obligation_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: md_regime_obligation_parameter_groups" author="DEFRA">
        <createTable tableName="md_regime_obligation_parameter_groups">
            <column name="md_regime_obligation_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_regime_obligation_parameter_groups__regime_obligation"
                             references="md_regime_obligation(id)"/>
            </column>
            <column name="parameter_groups_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_regime_obligation_parameter_groups__parameter_group"
                             references="md_parameter_group(id)"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="md_regime_obligation_id, parameter_groups_id" tableName="md_regime_obligation_parameter_groups"/>
        <rollback>
            <dropTable tableName="md_regime_obligation_parameter_groups"/>
        </rollback>
    </changeSet>

    <changeSet id="create-table: md_regime_obligation_units" author="DEFRA">
        <createTable tableName="md_regime_obligation_units">
            <column name="regime_obligation_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_regime_obligation_units__regime_obligation"
                             references="md_regime_obligation(id)"/>
            </column>
            <column name="unit_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_regime_obligation_units__unit"
                             references="md_unit(id)"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="regime_obligation_id, unit_id" tableName="md_regime_obligation_units"/>
        <rollback>
            <dropTable tableName="md_regime_obligation_units"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Thresholds
    ****************************************************************
    -->
    <changeSet id="create-table: md_threshold" author="DEFRA">
        <createSequence sequenceName="md_threshold_id_seq" startValue="1"/>
        <createTable tableName="md_threshold">
            <column name="id" type="bigint" defaultValueSequenceNext="md_threshold_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="type" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="numeric(30, 15)">
                <constraints nullable="false"/>
            </column>
            <column name="parameter_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_threshold__parameter"
                             references="md_parameter(id)"/>
            </column>
            <column name="regime_obligation_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_threshold__regime_obligation"
                             references="md_regime_obligation(id)"/>
            </column>
            <column name="unit_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_threshold__unit"
                             references="md_unit(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_threshold"/>
            <dropSequence sequenceName="md_threshold_id_seq"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Disposal Codes
    ****************************************************************
    -->
    <changeSet id="create-table: md_disposal_codes" author="DEFRA">
        <createSequence sequenceName="md_disposal_codes_id_seq" startValue="1"/>
        <createTable tableName="md_disposal_codes">
            <column name="id" type="bigint" defaultValueSequenceNext="md_disposal_codes_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(3)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="description" type="varchar(255)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_disposal_codes"/>
            <dropSequence sequenceName="md_disposal_codes_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: idx_md_disposal_codes" author="DEFRA">
        <createIndex indexName="idx_md_disposal_codes" tableName="md_disposal_codes" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_disposal_codes" indexName="idx_md_disposal_codes"/>
        </rollback>
    </changeSet>

    <!--
     ****************************************************************
     Recovery Codes
     ****************************************************************
     -->

    <changeSet id="create-table: md_recovery_codes" author="DEFRA">
        <createSequence sequenceName="md_recovery_codes_id_seq" startValue="1"/>
        <createTable tableName="md_recovery_codes">
            <column name="id" type="bigint" defaultValueSequenceNext="md_recovery_codes_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(3)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="description" type="varchar(255)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_recovery_codes"/>
            <dropSequence sequenceName="md_recovery_codes_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: idx_md_recovery_codes" author="DEFRA">
        <createIndex indexName="idx_md_recovery_codes" tableName="md_recovery_codes" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_recovery_codes" indexName="idx_md_recovery_codes"/>
        </rollback>
    </changeSet>

    <!--
     ****************************************************************
     Region
     ****************************************************************
     -->
    <changeSet id="create-table: md_region" author="DEFRA">
        <createSequence sequenceName="md_region_id_seq" startValue="1"/>
        <createTable tableName="md_region">
            <column name="id" type="bigint" defaultValueSequenceNext="md_region_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="code" type="varchar(2)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_region"/>
            <dropSequence sequenceName="md_region_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: idx_md_region" author="DEFRA">
        <createIndex indexName="idx_md_region" tableName="md_region" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_region" indexName="idx_md_region"/>
        </rollback>
    </changeSet>

    <!--
     ****************************************************************
     Area
     ****************************************************************
     -->
    <changeSet id="create-table: md_area" author="DEFRA">
        <createSequence sequenceName="md_area_id_seq" startValue="1"/>
        <createTable tableName="md_area">
            <column name="id" type="bigint" defaultValueSequenceNext="md_area_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="region_id" type="bigint">
                <constraints nullable="true"
                             foreignKeyName="fk_area__region"
                             referencedTableName="md_region"
                             referencedColumnNames="id"/>
            </column>
            <column name="nomenclature" type="varchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="code" type="varchar(4)">
                <constraints nullable="true" unique="false"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_area"/>
            <dropSequence sequenceName="md_area_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: idx_md_area" author="DEFRA">
        <createIndex indexName="idx_md_area" tableName="md_area" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_area" indexName="idx_md_area"/>
        </rollback>
    </changeSet>


    <!--
     ****************************************************************
     Operator
     ****************************************************************
     -->
    <changeSet id="create-table: md_operator" author="DEFRA">
        <createSequence sequenceName="md_operator_id_seq" startValue="1"/>
        <createTable tableName="md_operator">
            <column name="id" type="bigint" defaultValueSequenceNext="md_operator_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_operator"/>
            <dropSequence sequenceName="md_operator_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: idx_md_operator" author="DEFRA">
        <createIndex indexName="idx_md_operator" tableName="md_operator" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_operator" indexName="idx_md_operator"/>
        </rollback>
    </changeSet>

    <!--
     ****************************************************************
     Asr_code
     ****************************************************************
     -->
    <changeSet id="create-table: md_asr_code" author="DEFRA">
        <createSequence sequenceName="md_asr_code_id_seq" startValue="1"/>
        <createTable tableName="md_asr_code">
            <column name="id" type="bigint" defaultValueSequenceNext="md_asr_code_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(80)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="asr_full_code_description" type="varchar(400)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="asr_code" type="varchar(40)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="asr_code_description" type="varchar(80)">
                <constraints nullable="false" unique="false"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_asr_code"/>
            <dropSequence sequenceName="md_asr_code_id_seq"/>
        </rollback>
    </changeSet>
    <changeSet id="create-index: idx_md_asr_code" author="DEFRA">
        <createIndex indexName="idx_md_asr_code" tableName="md_asr_code" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_asr_code" indexName="idx_md_asr_code"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Unique Identifiers
    ****************************************************************
    -->
    <changeSet id="create-table: md_unique_identifier" author="DEFRA">
        <createSequence sequenceName="md_unique_identifier_id_seq" startValue="1"/>
        <createTable tableName="md_unique_identifier">
            <column name="id" type="bigint" defaultValueSequenceNext="md_unique_identifier_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(18)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="site_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_unique_identifier__site"
                             references="md_site(id)"/>
            </column>
            <column name="asr_code_id" type="bigint">
                <constraints nullable="true"
                             foreignKeyName="fk_unique_identifier__asr_code"
                             references="md_asr_code(id)"/>
            </column>
            <column name="operator_id" type="bigint">
                <constraints nullable="true"
                             foreignKeyName="fk_unique_identifier__operator"
                             references="md_operator(id)"/>
            </column>
            <column name="area_id" type="bigint">
                <constraints nullable="true"
                             foreignKeyName="fk_unique_identifier__area"
                             references="md_area(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_unique_identifier"/>
            <dropSequence sequenceName="md_unique_identifier_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: md_unique_identifier" author="DEFRA">
        <createIndex indexName="idx_md_unique_identifier_code" tableName="md_unique_identifier" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_unique_identifier" indexName="idx_md_unique_identifier_code"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Regime Unique Identifier M:M join table
    ****************************************************************
    -->
    <changeSet id="create-table: md_regime_unique_identifiers" author="DEFRA">
        <createTable tableName="md_regime_unique_identifiers">
            <column name="context" type="varchar(10)">
                <constraints nullable="false"></constraints>
            </column>
            <column name="regime_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_regime_unique_identifiers__regime"
                             referencedTableName="md_regime"
                             referencedColumnNames="id"/>
            </column>
            <column name="unique_identifier_id" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_regime_unique_identifiers__unique_identifier"
                             referencedTableName="md_unique_identifier"
                             referencedColumnNames="id"/>
            </column>
        </createTable>
        <addPrimaryKey columnNames="context, regime_id, unique_identifier_id" tableName="md_regime_unique_identifiers"/>
        <rollback>
            <dropTable tableName="md_regime_unique_identifiers"/>
        </rollback>
    </changeSet>

    <!--
    ****************************************************************
    Unique Identifier Aliases
    ****************************************************************
    -->
    <changeSet id="create-table: md_unique_identifier_alias" author="DEFRA">
        <createSequence sequenceName="md_unique_identifier_alias_id_seq" startValue="1"/>
        <createTable tableName="md_unique_identifier_alias">
            <column name="id" type="bigint" defaultValueSequenceNext="md_unique_identifier_alias_id_seq">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="nomenclature" type="varchar(18)">
                <constraints nullable="false" unique="true"/>
            </column>

            <column name="preferred" type="bigint">
                <constraints nullable="false"
                             foreignKeyName="fk_unique_identifier_alias_preferred"
                             references="md_unique_identifier(id)"/>
            </column>
            <column name="created" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified" type="timestamp">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="smallint">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <rollback>
            <dropTable tableName="md_unique_identifier_alias"/>
            <dropSequence sequenceName="md_unique_identifier_alias_id_seq"/>
        </rollback>
    </changeSet>

    <changeSet id="create-index: md_unique_identifier_alias" author="DEFRA">
        <createIndex indexName="idx_md_unique_identifier_alias" tableName="md_unique_identifier_alias" unique="true">
            <column name="nomenclature"/>
        </createIndex>
        <rollback>
            <dropIndex tableName="md_unique_identifier_alias" indexName="idx_md_unique_identifier_alias"/>
        </rollback>
    </changeSet>

</databaseChangeLog>
